<html>
  <head>
    <meta charset="utf-8">
    <title>SDK playground - Streaming</title>

    <script type="text/javascript">
    var i1 = 0; 
    var currentSong = 0; //song index
    var currentMusicState = 'play';
    var song = { 
        title: [],
        artist: [],
        id: []
    };

    SC.initialize({
            client_id: '52Q7VQ7hzBBAtE1AlxczqQHoBlBFaUBY'
        });
        SC.get('/rob-ashley/sets/niieelwh-02-17').then(function (playlist) {
            playlist.tracks.forEach(function (track) {
                song.id[i1] = track.id;
                song.title[i1] = track.title;
                song.artist[i1] = track.user.username;
                i1++;
            });
        });
    </script>
   
    <script type="text/javascript">
    SC.stream(('/tracks/' + song.id[currentSong])).then(function (musicPlayer) {
                musicPlayer.play();
                currentMusicState = 'play'; 
                if (currentSong < song.id.length) {
                    currentSong++; //next index for next song id
                }
                else{
                    currentSong = 0; //else loop back to first song
                }
                musicPlayer.on('finish', function(){ //this does nothing, but I'm pretty sure I'm during this wrong
                    playMusic(); //recursive function call
                });
            });
    </script>
  </body>
</html>